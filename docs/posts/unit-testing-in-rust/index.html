<!DOCTYPE html>
<html><head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Unit Testing in Rust - Beautiful Code</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta property="og:title" content="Unit Testing in Rust" />
<meta property="og:description" content="If you&rsquo;ve been through the process of adding unit tests in C&#43;&#43; with gmock or OCaml or python you know that you at least need to create a new file, add some linking flags, import a library and trigger the test suite from code and then execute the test program sepately.
No wonder it takes some painful code review comment to get people to start writing tests.
Rust turns that pain into pleasure." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://y2kappa.github.io/beautiful-code/posts/unit-testing-in-rust/" />
<meta property="article:published_time" content="2020-05-12T08:01:54+01:00" />
<meta property="article:modified_time" content="2020-05-12T08:01:54+01:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Unit Testing in Rust"/>
<meta name="twitter:description" content="If you&rsquo;ve been through the process of adding unit tests in C&#43;&#43; with gmock or OCaml or python you know that you at least need to create a new file, add some linking flags, import a library and trigger the test suite from code and then execute the test program sepately.
No wonder it takes some painful code review comment to get people to start writing tests.
Rust turns that pain into pleasure."/>

	<link href="https://fonts.googleapis.com/css2?family=Fira+Sans&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
	<link rel="stylesheet" type="text/css" media="screen" href="https://y2kappa.github.io/beautiful-code/css/main.css" /><link rel="stylesheet" type="text/css" href="https://y2kappa.github.io/beautiful-code/css/dark.css"  />
</head><body>
        <div class="content"><header>
	<div class="main">
		<a href="https://y2kappa.github.io/beautiful-code/">Beautiful Code</a>
	</div>
	<nav>
		
	</nav>
</header>

<main>
	<article>
		<div class="title">
			<h1 class="title">Unit Testing in Rust</h1>
			<div class="meta">Posted on May 12, 2020</div>
		</div>
		
		<div class="tldr">
			<strong>tl;dr:</strong>
			Rust tooling is fantastic
		</div>

		<section class="body">
			<p>If you&rsquo;ve been through the process of adding unit tests in C++ with gmock or
OCaml or python you know that you at least need to create a new file, add some
linking flags, import a library and trigger the test suite from code and then
execute the test program sepately.</p>
<p>No wonder it takes some painful code review comment to get people to start writing tests.</p>
<p><code>Rust</code> turns that pain into pleasure.</p>
<p>Let&rsquo;s say you have this main file:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust">
<span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">add</span>(a: <span style="color:#66d9ef">i32</span>, b: <span style="color:#66d9ef">i32</span>) -&gt; <span style="color:#66d9ef">i32</span> {
    a <span style="color:#f92672">+</span> b
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">main</span>() {
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, add(<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>));
}

</code></pre></div><p>How do you test it. Well, I&rsquo;m glad you asked. Just add this in the <code>SAME</code> file:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#75715e">#[test]</span>
<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">test_add</span>() {
    assert_eq<span style="color:#f92672">!</span>(<span style="color:#ae81ff">4</span>, add(<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">2</span>));
}
</code></pre></div><p>That&rsquo;s it.</p>
<p>So the whole file is:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">add</span>(a: <span style="color:#66d9ef">i32</span>, b: <span style="color:#66d9ef">i32</span>) -&gt; <span style="color:#66d9ef">i32</span> {
    a <span style="color:#f92672">+</span> b
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">main</span>() {
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, add(<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>));
}

<span style="color:#75715e">#[test]</span>
<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">test_add</span>() {
    assert_eq<span style="color:#f92672">!</span>(<span style="color:#ae81ff">4</span>, add(<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">2</span>));
}
</code></pre></div><p>Ain&rsquo;t that pretty?</p>
<hr>
<p>So, be a good citizen and start learning <code>Rust</code>. Also, we&rsquo;re <code>looking for contributions</code> for some <code>sweet lookin' code</code>.</p>

		</section>

		<div class="post-tags">
			
			
			<nav class="nav tags">
				<ul class="tags">
					
					<li><a href="/beautiful-code/tags/rust">Rust</a></li>
					
					<li><a href="/beautiful-code/tags/testing">testing</a></li>
					
				</ul>
			</nav>
			
			
		</div>
	</article>
</main>
<footer>
<hr>⚡️
	2020  <a href="https://github.com/athul/archie">Archie Theme</a> | Built with <a href="https://gohugo.io">Hugo</a>
</footer>




</div>
    </body>
</html>
