<!DOCTYPE html>
<html lang="en">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<title>Unit Testing in Rust (or why I love Rust) - </title>

<meta name="description" content="If you&rsquo;ve been through the process of adding unit tests in C&#43;&#43; with gmock or OCaml or python you know that you at least need to create a new file, add some linking flags, import a library and trigger the test suite from code and then execute the test program sepately.
No wonder it takes some painful code review comment to get people to start writing tests.
Rust turns that pain into pleasure.">
<meta name="author" content="">
<link rel="canonical" href="/posts/unit-testing-in-rust/" />















<link href="/css/stylesheet.min.4581144a74632233912d1badb7cee91e143c7449a9eb20e8ccfc496d608675ac.css" integrity="sha256-RYEUSnRjIjORLRutt87pHhQ8dEmp6yDozPxJbWCGdaw=" rel="preload stylesheet"
    as="style">


<link rel="apple-touch-icon" href="apple-touch-icon.png">
<link rel="icon" href="favicon.ico">
<meta name="generator" content="Hugo 0.70.0" />


</head>

<body
    class="single"
    id="top">
<header class="header">
    <nav class="nav">
        <p class="logo"><a href=""></a></p>
    </nav>
</header>
    <main class="main">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">
      Unit Testing in Rust (or why I love Rust)
    </h1>
    
    <div class="post-meta">
      <time>May 12, 2020</time>
      
      
    </div>
    
  </header>
  
  
  <div class="post-content"><p>If you&rsquo;ve been through the process of adding unit tests in C++ with gmock or
OCaml or python you know that you at least need to create a new file, add some
linking flags, import a library and trigger the test suite from code and then
execute the test program sepately.</p>
<p>No wonder it takes some painful code review comment to get people to start writing tests.</p>
<p><code>Rust</code> turns that pain into pleasure.</p>
<p>Let&rsquo;s say you have this main file:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust">
<span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">add</span>(a: <span style="color:#66d9ef">i32</span>, b: <span style="color:#66d9ef">i32</span>) -&gt; <span style="color:#66d9ef">i32</span> {
    a <span style="color:#f92672">+</span> b
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">main</span>() {
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, add(<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>));
}

</code></pre></div><p>How do you test it. Well, I&rsquo;m glad you asked. Just add this in the <strong>SAME</strong> file:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#75715e">#[test]</span>
<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">test_add</span>() {
    assert_eq<span style="color:#f92672">!</span>(<span style="color:#ae81ff">4</span>, add(<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">2</span>));
}
</code></pre></div><p>That&rsquo;s it.</p>
<p>So the whole file is:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">add</span>(a: <span style="color:#66d9ef">i32</span>, b: <span style="color:#66d9ef">i32</span>) -&gt; <span style="color:#66d9ef">i32</span> {
    a <span style="color:#f92672">+</span> b
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">main</span>() {
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;{}&#34;</span>, add(<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>));
}

<span style="color:#75715e">#[test]</span>
<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">test_add</span>() {
    assert_eq<span style="color:#f92672">!</span>(<span style="color:#ae81ff">4</span>, add(<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">2</span>));
}
</code></pre></div><hr>
<p>Be a good citizen and start learning <code>Rust</code>.</p>
</div>
  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="tags/rust">Rust</a></li>
      <li><a href="tags/testing">testing</a></li>
    </ul>
    
  </footer>
</article>


    </main><footer class="footer">
    <span>&copy; 2020 <a href=""></a></span>
    <span>&middot;</span>
    <span>Powered by <a href="https://gohugo.io/" rel="noopener" target="_blank">Hugo️️</a>️</span>
    <span>&middot;</span>
    <span>Theme️ <a href="https://github.com/adityatelange/hugo-PaperMod" rel="noopener"
            target="_blank">PaperMod</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top">
    <button class="top-link" id="top-link" type="button">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6">
            <path d="M12 6H0l6-6z" /></svg>
    </button>
</a>


<script src="/js/highlight.min.min.e7afc2928c0925d65c4732dfebe147014d91299a98e819e4b42f25c4fa68e91c.js" integrity="sha256-56/CkowJJdZcRzLf6&#43;FHAU2RKZqY6BnktC8lxPpo6Rw="></script>

<script>
    window.onload = function () {
        if (localStorage.getItem("menu-scroll-position")) {
            document.getElementById('menu').scrollLeft = localStorage.getItem("menu-scroll-position");
        }
    }
    
    hljs.initHighlightingOnLoad();
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();

            document.querySelector(this.getAttribute("href")).scrollIntoView({
                behavior: "smooth"
            });
        });
    });
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };
    function menu_on_scroll() {
        localStorage.setItem("menu-scroll-position", document.getElementById('menu').scrollLeft);
    }
</script>
</body>

</html>